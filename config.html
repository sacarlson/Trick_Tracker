<!DOCTYPE html>
<!-- Copyright (c) 2016  Sacarlson  sacarlson_2000@yahoo.com -->
<html>
<head>
 <title> Config Settings </title>
 <meta name="viewport" content="width=device-width, initial-scale=1">
 <meta name="keywords" content="configure, custom, map, GPS, real-time, camera, way points, mark locations">
 <meta name="description" content="Customize the default settings of your FunTracker.site experience with changeable configuration settings (for advanced users). ">

 <!<link rel="stylesheet" href="https://www.w3schools.com/lib/w3.css">
 <link rel="stylesheet" href="w3.css">

 <style type="text/css">
.box_auto { 
  margin: auto;
  width: 100%;
  height: auto;
  margin: 10px;
}

p {
	word-wrap: break-word;
}

 </style>

 <script src="tt_lib.js"></script>

 <script>
  "use strict";
  window.addEventListener("load", function(event) { 

  var lat = document.getElementById("lat");
  var lon = document.getElementById("lon");
  var zoom = document.getElementById("zoom");
  var id = document.getElementById("id");
  var track_id = document.getElementById("track_id");
  var track_time_min = document.getElementById("track_time_min");
  var map_link = document.getElementById("map_link");
  var icon_type = document.getElementById("icon_type");
  var info = document.getElementById("info");
  var tracker_server = document.getElementById("tracker_server");
  var tracker_get_server = document.getElementById("tracker_get_server");
  var update_interval = document.getElementById("update_interval");
  var irc_server = document.getElementById("irc_server");
  var cam_resolution = document.getElementById("cam_resolution");
  // this filter is for type 
  var filter = document.getElementById("filter"); 
  var radius_filter = document.getElementById("radius_filter"); 
  var send_cord_interval = document.getElementById("send_cord_interval"); 
  var send_cord_enable = document.getElementById("send_cord_enable"); 
  var icon_scale = document.getElementById("icon_scale"); 
  var alarm_radius = document.getElementById("alarm_radius");
  var alarm_ref_lat = document.getElementById("alarm_ref_lat");
  var alarm_ref_lon = document.getElementById("alarm_ref_lon");
  var disable_cords_ref_lat = document.getElementById("disable_cords_ref_lat");
  var disable_cords_ref_lon = document.getElementById("disable_cords_ref_lon");
  var disable_cords_radius = document.getElementById("disable_cords_radius");
  var map_center_mode = document.getElementById("map_center_mode");

  //var params = {};

  var timestamp = Math.floor(Date.now() / 1000);
  
  document.getElementById("site_hostname").innerHTML= get_site_hostname();
  
  get_config();
  put_params();
  make_map_link();

  console.log("params3");
  console.log(params);

  function make_map_link() {
    var info_fixed = encodeURI(info.value);
    //var link_url = tracker_server.value + "map/?json={%22lat%22:%22" + lat.value + "%22,%22lon%22:%22" + lon.value + "%22,%22zoom%22:%22" + zoom.value + "%22,%22type%22:%22" + icon_type.value + "%22,%22info%22:%22" + info_fixed + "%22,%22timestamp%22:%22" + timestamp + "%22}";
    var sitehome = get_site_hostname();
    var link_url = "https://" + sitehome + "/map.html?json={%22no_icons%22:%221%22,%22lat%22:%22" + lat.value + "%22,%22lon%22:%22" + lon.value + "%22,%22zoom%22:%22" + zoom.value + "%22,%22type%22:%22" + icon_type.value + "%22,%22info%22:%22" + info_fixed + "%22,%22timestamp%22:%22" + timestamp + "%22}";

    map_link.innerHTML = '<h4>' + link_url + '</h4>'; 
  }


  
window.onclick = function(event) {
  if (!event.target.matches('.dropbtn')) {

    var dropdowns = document.getElementsByClassName("dropdown-content");
    var i;
    for (i = 0; i < dropdowns.length; i++) {
      var openDropdown = dropdowns[i];
      if (openDropdown.classList.contains('show')) {
        openDropdown.classList.remove('show');
      }
    }
  }
}

 submit.addEventListener("click", function(event) {
    console.log("submit clicked");
    save_configs();
    make_map_link();  
 });

  recenter_map.addEventListener("click", function(event) {
    console.log("recenter_map clicked");
    //getLocation();
    getLocation_config();
 });

  reset_default.addEventListener("click", function(event) {
    console.log("reset_default clicked");
    reset_default_();
 });


  console.log("page loaded");
 }); // end  window.addEventListener("load", function(event) { 
     function dropDown() {
       document.getElementById("myDropdown").classList.toggle("show");
     } 
     console.log("page loaded2");                         
  </script>
<style>
.dropbtn {
    background-color: #4CAF50;
    color: white;
    padding: 16px;
    font-size: 16px;
    border: none;
    cursor: pointer;
}

.dropbtn:hover, .dropbtn:focus {
    background-color: #3e8e41;
}

.dropdown {
    position: relative;
    display: inline-block;
}

.dropdown-content {
    display: none;
    position: absolute;
    background-color: #f9f9f9;
    min-width: 160px;
    overflow: auto;
    box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
}

.dropdown-content a {
    color: black;
    padding: 12px 16px;
    text-decoration: none;
    display: block;
}

.dropdown a:hover {background-color: #f1f1f1}

.show {display:block;}

a {
  font-size: calc(1vw + 1vh + 1vmin);
}

.button {
  font-size: 22px;
}
</style>
</head>
<body>

<div class="w3-container w3-teal">
  <div class="dropdown">
    <button onclick="dropDown()" class="dropbtn">Menu</button>
    <div id="myDropdown" class="dropdown-content">
      <a href="chat.html">Real Time Chat</a>
      <a href="map.html">Map</a>      
      <a href="send.html">Send Cords</a>
      <a href="change_icon.html">Change Icon</a>
      <a href="./shoot/index.html">Shoot Pictures</a> 
      <a href="./shoot/gallery.php">Gallery</a>
      <a href="./table/user_table.php">Members List</a>
      <a href="./table/index.php">Tracker Event Table</a>
      <a href="./table/pic_table.php">Picture Event Table</a>
      <a href="./table/walker.html">Walk Mileage Monitor</a>
      <a href="up_custom.php">Customize Icon</a>
      <a href="./wiki/doku.php">Wiki</a>   
    </div>
  </div>
  <h1><span id="site_hostname"></span> Configure Customize</h1>
</div>


<div class="w3-row-padding w3-margin-top">

 <form class="w3-container">

<label class="w3-label">Map Center Lat</label>
<input class="w3-input" type="text" id="lat" >

<label class="w3-label">Map Center Lon</label>
<input class="w3-input" type="text" id="lon">

<label class="w3-label">Map Zoom Factor</label>
<input class="w3-input" type="text" id="zoom">

<label class="w3-label">Your User ID#</label>
<input class="w3-input" type="text" id="id">

<label class="w3-label">Filter Types: (example 16,2 to display only camera and sexy_girls) </label>
<input class="w3-input" type="text" id="filter">

<label class="w3-label">Filter Radius: (Max distance to display targets in Meters)</label>
<input class="w3-input" type="text" id="radius_filter">

<label class="w3-label">Track ID</label>
<input class="w3-input" type="text" id="track_id">

<label class="w3-label">Track Trail Time (minutes)</label>
<input class="w3-input" type="text" id="track_time_min">
<label class="w3-label">Map Update Interval (seconds)</label>
<input class="w3-input" type="text" id="update_interval">
<label class="w3-label">Link Icon Type number (0 - 14)</label>
<input class="w3-input" type="text" id="icon_type">
<label class="w3-label">Link added Popup Info</label>
<input class="w3-input" type="text" id="info">
<label class="w3-label">Tracker Server URL</label>
<input class="w3-input" type="text" id="tracker_server">
<label class="w3-label">Tracker Get Server URL</label>
<input class="w3-input" type="text" id="tracker_get_server">
<label class="w3-label">IRC Server</label>
<input class="w3-input" type="text" id="irc_server">
<label class="w3-label">Camera Resolution (default low = 640x480, high = 1280x720)</label>
<input class="w3-input" type="text" id="cam_resolution">
<label class="w3-label">Enable Send Coords</label>
<input class="w3-input" type="text" id="enable_send_cord">
<label class="w3-label">Send Coords Interval (seconds)</label>
<input class="w3-input" type="text" id="send_cord_interval">
<label class="w3-label">Min Speed Record (mph)</label>
<input class="w3-input" type="text" id="min_speed_record">
<label class="w3-label">Max Speed Record (mph)</label>
<input class="w3-input" type="text" id="max_speed_record">
<label class="w3-label">Icon Scale value (set size on map) default 1</label>
<input class="w3-input" type="text" id="icon_scale">
<label class="w3-label">Alarm Radius (meters) default 0 (positive outside radius trigger)</label>
<input class="w3-input" type="text" id="alarm_radius">
<label class="w3-label">Alarm Reference Lat default 0 (0 sets ref point to device)</label>
<input class="w3-input" type="text" id="alarm_ref_lat">
<label class="w3-label">Alarm Reference long default 0 </label>
<input class="w3-input" type="text" id="alarm_ref_lon">

<label class="w3-label">Disable Send Coords Radius default 0 </label>
<input class="w3-input" type="text" id="disable_cords_radius">
<label class="w3-label">Disable Send Coords Reference Lat default 0 </label>
<input class="w3-input" type="text" id="disable_cords_ref_lat">
<label class="w3-label">Disable Send Coords Reference Long default 0 </label>
<input class="w3-input" type="text" id="disable_cords_ref_lon">
<label class="w3-label">Map Center Mode, default 0</label>
<input class="w3-input" type="text" id="map_center_mode">

<input type="button" value="Submit Changes" id="submit" >
<input type="button" value="Set Map Center to GPS position" id="recenter_map" >
<input type="button" value="Reset to Default Configs" id="reset_default" >

</form>
<div>
<h2> Map link </h2>
 
<div  class="w3-row">
  <div class="w3-container w3-half">
    <p><span id="map_link"> </span></p>
  </div> 
</div>

</div>

</div>


</body>
</html>
